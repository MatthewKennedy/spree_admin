<%= render partial: 'spree/admin/shared/error_messages', locals: { target: @promotion } %>

<div class="row" id="general_fields">
  <div class="col-12 col-lg-4">
    <%= f.field_container :name do %>
      <%= f.label :name %>
      <%= f.text_field :name, class: 'form-control' %>
      <%= f.error_message_on :name %>
    <% end %>

    <div class="form-group">
      <%= f.field_container :code do %>
        <%= f.label :code %>
        <%= f.text_field :code, class: 'form-control' %>
      <% end %>

      <%= f.field_container :generate_code, class: ['form-check'] do %>
        <%= f.label :generate_code, class: 'form-check-label' do %>
          <%= f.check_box :generate_code, class: 'form-check-input' %>
          <%= Spree.t(:generate_code) %>
        <% end %>
      <% end %>
    </div>

    <%= f.field_container :path do %>
      <%= f.label :path %>
      <%= f.text_field :path, class: 'form-control' %>
    <% end %>

    <%= f.field_container :advertise, class: ['form-check'] do %>
      <%= f.label :advertise, class: 'form-check-label' do %>
        <%= f.check_box :advertise, class: 'form-check-input' %>
        <%= Spree.t(:advertise) %>
      <% end %>
    <% end %>
  </div>

  <div class="col-12 col-lg-4">
    <%= f.field_container :description do %>
      <%= f.label :description %>
      <%= f.text_area :description, rows: 4, class: 'form-control' %>
    <% end %>

    <%= f.field_container :category do %>
      <%= f.label :promotion_category %>
      <%= f.collection_select(:promotion_category_id, @promotion_categories, :id, :name, { include_blank: I18n.t('spree.dash.match_choices.none') }, { class: 'select2 w-100' }) %>
    <% end %>

    <% if @stores.count > 1 %>
      <%= f.field_container :stores do %>
        <%= f.label :promotion_stores, Spree.t(:stores) %>
        <%= collection_select(:promotion, :store_ids, @stores, :id, :unique_name, {}, { multiple: true, data: {controller: 'ts--select'} }) %>
      <% end %>
    <% end %>
  </div>

  <div id="expiry_fields" class="col-12 col-lg-4">
    <div class="form-group">
      <%= f.field_container :usage_limit do %>
        <%= f.label :usage_limit, I18n.t('spree.dash.limit_usage_to') %>
        <%= f.number_field :usage_limit, min: 0, class: 'form-control hide-number-toggle' %>
      <% end %>
      <small class="form-text text-muted">
        <%= Spree.t(:current_promotion_usage, count: @promotion.credits_count) %>
      </small>
    </div>
    <div id="starts_at_field" class="form-group">
      <%= f.label :starts_at %>
      <%= render partial: 'spree/admin/shared/date_picker_from', locals: { f: f,
                                                                           from_field: :starts_at,
                                                                           to_field: :expires_at,
                                                                           data_max_date: @promotion.expires_at,
                                                                           date_time: true,
                                                                           placeholder: I18n.t('spree.dash.starting_from') } %>
    </div>

    <div id="expires_at_field" class="form-group">
      <%= f.label :expires_at %>
      <%= render partial: 'spree/admin/shared/date_picker_to',  locals: { f: f,
                                                                          to_field: :expires_at,
                                                                          from_field: :starts_at,
                                                                          data_min_date: @promotion.starts_at,
                                                                          date_time: true,
                                                                          placeholder: I18n.t('spree.dash.ends_at') } %>
    </div>
  </div>
</div>
